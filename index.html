<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Toko Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --gray-light: #f3f4f6;
            --gray-dark: #6b7280;
        }
        
        .gallery-main {
            aspect-ratio: 4/5;
        }
        
        .thumbnail {
            aspect-ratio: 1/1;
        }
        
        .slide-enter-active, .slide-leave-active {
            transition: transform 0.3s ease;
        }
        
        .slide-enter-from {
            transform: translateX(100%);
        }
        
        .slide-leave-to {
            transform: translateX(-100%);
        }
        
        @media (max-width: 768px) {
            .product-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Generator Toko Online</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <form id="storeGeneratorForm" class="space-y-6">
                <!-- Section 1: Informasi Produk -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">1. Informasi Produk</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="productName" class="block text-sm font-medium text-gray-700 mb-1">Nama Produk*</label>
                            <input type="text" id="productName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label for="productPrice" class="block text-sm font-medium text-gray-700 mb-1">Harga (Rp)*</label>
                            <input type="number" id="productPrice" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label for="productDescription" class="block text-sm font-medium text-gray-700 mb-1">Deskripsi Produk*</label>
                        <textarea id="productDescription" rows="3" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="storeName" class="block text-sm font-medium text-gray-700 mb-1">Nama Toko*</label>
                            <input type="text" id="storeName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label for="whatsappNumber" class="block text-sm font-medium text-gray-700 mb-1">Nomor WhatsApp Toko (62xxx)*</label>
                            <input type="text" id="whatsappNumber" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="6281234567890">
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label for="storePhone" class="block text-sm font-medium text-gray-700 mb-1">Nomor Telepon Toko (Opsional)</label>
                        <input type="text" id="storePhone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="mt-4">
                        <label for="productFeatures" class="block text-sm font-medium text-gray-700 mb-1">Fitur Produk (Opsional, pisahkan dengan koma)</label>
                        <input type="text" id="productFeatures" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Tahan air, Baterai tahan lama, dsb">
                    </div>
                </div>
                
                <!-- Section 2: Gambar & Media -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">2. Gambar & Media</h2>
                    
                    <div>
                        <label for="productImages" class="block text-sm font-medium text-gray-700 mb-1">URL Gambar Produk* (satu URL per baris, minimal 1)</label>
                        <textarea id="productImages" rows="3" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/image1.jpg"></textarea>
                        <p class="text-xs text-gray-500 mt-1">Gambar pertama akan menjadi gambar utama produk</p>
                    </div>
                    
                    <div class="mt-4">
                        <label for="productGif" class="block text-sm font-medium text-gray-700 mb-1">URL GIF Produk (Opsional)</label>
                        <input type="text" id="productGif" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/animation.gif">
                    </div>
                </div>
                
                <!-- Section 3: Varian Produk -->
                <div>
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">3. Varian Produk</h2>
                    
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="hasVariants" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="hasVariants" class="ml-2 block text-sm text-gray-700">Produk punya varian?</label>
                    </div>
                    
                    <div id="variantOptions" class="space-y-4 hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="variantColors" class="block text-sm font-medium text-gray-700 mb-1">Warna (pisahkan dengan koma)</label>
                                <input type="text" id="variantColors" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Merah, Biru, Hitam">
                            </div>
                            
                            <div>
                                <label for="variantSizes" class="block text-sm font-medium text-gray-700 mb-1">Ukuran (pisahkan dengan koma)</label>
                                <input type="text" id="variantSizes" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="S, M, L, XL">
                            </div>
                        </div>
                        
                        <div class="flex items-center">
                            <input type="checkbox" id="autoCombine" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                            <label for="autoCombine" class="ml-2 block text-sm text-gray-700">Buat kombinasi otomatis warna-ukuran</label>
                        </div>
                        
                        <div id="manualVariantsContainer" class="hidden">
                            <label for="manualVariants" class="block text-sm font-medium text-gray-700 mb-1">Daftar Varian Manual (satu varian per baris)</label>
                            <textarea id="manualVariants" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Merah - S\nBiru - M"></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="pt-4">
                    <button type="button" id="generateBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Generate Toko Online
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Preview Section -->
        <div id="previewSection" class="hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800">Preview Toko Online</h2>
                <div class="flex space-x-2">
                    <button id="copyBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                        Salin Kode
                    </button>
                    <button id="downloadBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Download HTML
                    </button>
                </div>
            </div>
            
            <div id="storePreview" class="bg-white rounded-lg shadow-md overflow-hidden mb-8"></div>
            
            <div id="generatedCode" class="hidden">
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Kode HTML:</h3>
                <pre id="codeOutput" class="bg-gray-800 text-gray-100 p-4 rounded-md overflow-x-auto text-sm"></pre>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Toggle variant options
            const hasVariantsCheckbox = document.getElementById('hasVariants');
            const variantOptionsDiv = document.getElementById('variantOptions');
            const autoCombineCheckbox = document.getElementById('autoCombine');
            const manualVariantsContainer = document.getElementById('manualVariantsContainer');
            
            hasVariantsCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    variantOptionsDiv.classList.remove('hidden');
                } else {
                    variantOptionsDiv.classList.add('hidden');
                }
            });
            
            autoCombineCheckbox.addEventListener('change', function() {
                if (!this.checked) {
                    manualVariantsContainer.classList.remove('hidden');
                } else {
                    manualVariantsContainer.classList.add('hidden');
                }
            });
            
            // Generate button click handler
            document.getElementById('generateBtn').addEventListener('click', function() {
                if (!validateForm()) {
                    return;
                }
                
                generateStore();
                document.getElementById('previewSection').classList.remove('hidden');
                document.getElementById('generatedCode').classList.remove('hidden');
                
                // Scroll to preview
                document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Copy button click handler
            document.getElementById('copyBtn').addEventListener('click', function() {
                const code = document.getElementById('codeOutput').textContent;
                navigator.clipboard.writeText(code).then(function() {
                    const originalText = this.textContent;
                    this.textContent = 'Tersalin!';
                    this.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                    this.classList.add('bg-green-500', 'hover:bg-green-600', 'text-white');
                    
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.classList.remove('bg-green-500', 'hover:bg-green-600', 'text-white');
                        this.classList.add('bg-gray-200', 'hover:bg-gray-300');
                    }, 2000);
                }.bind(this));
            });
            
            // Download button click handler
            document.getElementById('downloadBtn').addEventListener('click', function() {
                const code = document.getElementById('codeOutput').textContent;
                const blob = new Blob([code], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'toko-online.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Form validation
            function validateForm() {
                let isValid = true;
                
                // Required fields
                const requiredFields = [
                    'productName', 'productPrice', 'productDescription', 
                    'storeName', 'whatsappNumber', 'productImages'
                ];
                
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.classList.add('border-red-500');
                        isValid = false;
                    } else {
                        field.classList.remove('border-red-500');
                    }
                });
                
                // Validate WhatsApp number format
                const whatsappNumber = document.getElementById('whatsappNumber').value.trim();
                if (whatsappNumber && !/^62\d{9,}$/.test(whatsappNumber)) {
                    document.getElementById('whatsappNumber').classList.add('border-red-500');
                    isValid = false;
                }
                
                // Validate at least one image URL
                const imageUrls = document.getElementById('productImages').value.trim().split('\n').filter(url => url.trim());
                if (imageUrls.length === 0) {
                    document.getElementById('productImages').classList.add('border-red-500');
                    isValid = false;
                }
                
                return isValid;
            }
            
            // Generate the store HTML
            function generateStore() {
                // Get form values
                const productName = document.getElementById('productName').value.trim();
                const productPrice = parseInt(document.getElementById('productPrice').value.trim());
                const productDescription = document.getElementById('productDescription').value.trim();
                const storeName = document.getElementById('storeName').value.trim();
                const whatsappNumber = document.getElementById('whatsappNumber').value.trim();
                const storePhone = document.getElementById('storePhone').value.trim();
                const productFeatures = document.getElementById('productFeatures').value.trim();
                const productImages = document.getElementById('productImages').value.trim().split('\n').filter(url => url.trim());
                const productGif = document.getElementById('productGif').value.trim();
                const hasVariants = document.getElementById('hasVariants').checked;
                
                // Format price
                const formattedPrice = new Intl.NumberFormat('id-ID', { 
                    style: 'currency', 
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(productPrice);
                
                // Generate variants if needed
                let variants = [];
                if (hasVariants) {
                    const autoCombine = document.getElementById('autoCombine').checked;
                    
                    if (autoCombine) {
                        const colors = document.getElementById('variantColors').value.trim().split(',').map(c => c.trim()).filter(c => c);
                        const sizes = document.getElementById('variantSizes').value.trim().split(',').map(s => s.trim()).filter(s => s);
                        
                        if (colors.length > 0 && sizes.length > 0) {
                            colors.forEach(color => {
                                sizes.forEach(size => {
                                    variants.push(`${color} - ${size}`);
                                });
                            });
                        } else if (colors.length > 0) {
                            variants = colors;
                        } else if (sizes.length > 0) {
                            variants = sizes;
                        }
                    } else {
                        variants = document.getElementById('manualVariants').value.trim().split('\n').map(v => v.trim()).filter(v => v);
                    }
                }
                
                // Generate HTML for the store
                const storeHTML = `
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${productName} - ${storeName}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gallery-main {
            aspect-ratio: 4/5;
        }
        
        .thumbnail {
            aspect-ratio: 1/1;
        }
        
        @media (max-width: 768px) {
            .product-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <header class="bg-white shadow-sm rounded-lg p-4 mb-6">
            <div class="flex justify-between items-center">
                <h1 class="text-xl font-bold text-gray-800">${storeName}</h1>
                <div class="flex items-center space-x-2">
                    <a href="https://wa.me/${whatsappNumber}" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-sm flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-6.29-3.51c.174-.386.272-.799.272-1.218 0-.52-.133-.987-.397-1.386-.422-.619-1.186-.995-2.04-.995-1.338 0-2.423 1.09-2.423 2.435 0 .898.434 1.707 1.111 2.219.173.124.25.148.322.148.074 0 .149-.025.223-.074.272-.173.744-.644.893-.868.074-.124.124-.198.198-.198.074 0 .124.025.173.124.074.198.396 1.142.446 1.239.05.099.025.173-.025.248-.05.074-.173.149-.322.223-.149.074-.297.149-.347.198-.05.05-.05.124-.025.198.05.099.198.446.519.694.397.31.893.483 1.413.483 1.488 0 2.694-1.216 2.694-2.716 0-.868-.421-1.636-1.091-2.117"/>
                            <path d="M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.848 0-3.584-.524-5.06-1.428l-3.82 1.067 1.066-3.82A9.96 9.96 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.69.56 3.25 1.5 4.5L4 20l3.5-1.5A8 8 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8"/>
                        </svg>
                        WhatsApp
                    </a>
                    ${storePhone ? `<a href="tel:${storePhone}" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                        </svg>
                        Telepon
                    </a>` : ''}
                </div>
            </div>
        </header>
        
        <!-- Product Section -->
        <div class="product-layout grid grid-cols-1 md:grid-cols-2 gap-6 bg-white rounded-lg shadow-md p-6">
            <!-- Gallery -->
            <div class="gallery-container">
                <div class="gallery-main bg-gray-100 rounded-lg overflow-hidden mb-4 relative">
                    <img id="mainImage" src="${productImages[0]}" alt="${productName}" class="w-full h-full object-cover">
                    ${productGif ? `<img id="gifImage" src="${productGif}" alt="${productName} GIF" class="w-full h-full object-cover hidden">` : ''}
                    
                    <button id="prevBtn" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 rounded-full p-2 shadow-md hover:bg-opacity-100 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <button id="nextBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 rounded-full p-2 shadow-md hover:bg-opacity-100 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    
                    ${productGif ? `<button id="toggleGifBtn" class="absolute bottom-2 right-2 bg-white bg-opacity-70 rounded-full p-2 shadow-md hover:bg-opacity-100 focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                        </svg>
                    </button>` : ''}
                </div>
                
                <div class="thumbnail-container flex space-x-2 overflow-x-auto py-2">
                    ${productImages.map((img, index) => `
                        <button class="thumbnail-btn ${index === 0 ? 'border-2 border-blue-500' : 'border border-gray-200'}" data-index="${index}">
                            <img src="${img}" alt="Thumbnail ${index + 1}" class="thumbnail w-16 h-16 object-cover rounded">
                        </button>
                    `).join('')}
                    
                    ${productGif ? `
                        <button class="thumbnail-btn border border-gray-200" data-gif="true">
                            <img src="${productGif}" alt="GIF Thumbnail" class="thumbnail w-16 h-16 object-cover rounded">
                        </button>
                    ` : ''}
                </div>
            </div>
            
            <!-- Product Info -->
            <div class="product-info">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">${productName}</h1>
                <div class="text-2xl font-semibold text-blue-600 mb-4">${formattedPrice}</div>
                
                ${productFeatures ? `<div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-700 mb-1">Fitur Produk:</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600">
                        ${productFeatures.split(',').map(feature => `<li>${feature.trim()}</li>`).join('')}
                    </ul>
                </div>` : ''}
                
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-700 mb-1">Deskripsi:</h3>
                    <p class="text-sm text-gray-600 whitespace-pre-line">${productDescription}</p>
                </div>
                
                <!-- Order Form -->
                <form id="orderForm" class="space-y-4">
                    ${hasVariants ? `
                    <div>
                        <label for="productVariant" class="block text-sm font-medium text-gray-700 mb-1">Varian:</label>
                        <select id="productVariant" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            ${variants.map(variant => `<option value="${variant}">${variant}</option>`).join('')}
                        </select>
                    </div>
                    ` : ''}
                    
                    <div>
                        <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1">Jumlah:</label>
                        <div class="flex items-center">
                            <button type="button" id="decrementBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded-l-md focus:outline-none">-</button>
                            <input type="number" id="quantity" value="1" min="1" class="w-16 px-3 py-1 border-t border-b border-gray-300 text-center focus:outline-none">
                            <button type="button" id="incrementBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded-r-md focus:outline-none">+</button>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Metode Pembayaran:</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="paymentMethod" value="transfer" checked class="h-4 w-4 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">Transfer Bank</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="paymentMethod" value="cod" class="h-4 w-4 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">COD (Bayar di Tempat)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label for="customerName" class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap*</label>
                        <input type="text" id="customerName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label for="customerWhatsApp" class="block text-sm font-medium text-gray-700 mb-1">Nomor WhatsApp*</label>
                        <input type="text" id="customerWhatsApp" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="6281234567890">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                        <div>
                            <label for="province" class="block text-sm font-medium text-gray-700 mb-1">Provinsi*</label>
                            <select id="province" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Pilih Provinsi</option>
                                <option value="DKI Jakarta">DKI Jakarta</option>
                                <option value="Jawa Barat">Jawa Barat</option>
                                <option value="Jawa Tengah">Jawa Tengah</option>
                                <option value="Jawa Timur">Jawa Timur</option>
                                <option value="Banten">Banten</option>
                                <option value="Bali">Bali</option>
                                <option value="Sumatera Utara">Sumatera Utara</option>
                                <option value="Sumatera Barat">Sumatera Barat</option>
                                <option value="Sumatera Selatan">Sumatera Selatan</option>
                                <option value="Sulawesi Selatan">Sulawesi Selatan</option>
                            </select>
                        </div>
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700 mb-1">Kota/Kabupaten*</label>
                            <select id="city" required disabled class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Pilih Kota</option>
                            </select>
                        </div>
                        <div>
                            <label for="district" class="block text-sm font-medium text-gray-700 mb-1">Kecamatan*</label>
                            <select id="district" required disabled class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Pilih Kecamatan</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Alamat Lengkap*</label>
                        <textarea id="address" rows="2" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    
                    <div>
                        <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Catatan Tambahan</label>
                        <textarea id="notes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    
                    <!-- Order Summary -->
                    <div class="bg-gray-50 p-4 rounded-md">
                        <h3 class="text-sm font-medium text-gray-700 mb-2">Ringkasan Pesanan:</h3>
                        <div class="space-y-1 text-sm text-gray-600">
                            <div class="flex justify-between">
                                <span>Subtotal:</span>
                                <span id="subtotal">${formattedPrice}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ongkos Kirim:</span>
                                <span id="shippingCost">Rp0</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Kode Unik:</span>
                                <span id="uniqueCode">-</span>
                            </div>
                            <div class="border-t border-gray-200 my-2"></div>
                            <div class="flex justify-between font-medium text-gray-800">
                                <span>Total:</span>
                                <span id="totalPrice">${formattedPrice}</span>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" id="orderBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Pesan Sekarang
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gallery functionality
            const mainImage = document.getElementById('mainImage');
            ${productGif ? 'const gifImage = document.getElementById("gifImage");' : ''}
            const thumbnailBtns = document.querySelectorAll('.thumbnail-btn');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            ${productGif ? 'const toggleGifBtn = document.getElementById("toggleGifBtn");' : ''}
            
            let currentImageIndex = 0;
            const images = ${JSON.stringify(productImages)};
            ${productGif ? 'let showingGif = false;' : ''}
            
            // Thumbnail click handler
            thumbnailBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.dataset.gif) {
                        ${productGif ? `
                        mainImage.classList.add('hidden');
                        gifImage.classList.remove('hidden');
                        showingGif = true;
                        ` : ''}
                    } else {
                        ${productGif ? `
                        mainImage.classList.remove('hidden');
                        gifImage.classList.add('hidden');
                        showingGif = false;
                        ` : ''}
                        currentImageIndex = parseInt(this.dataset.index);
                        mainImage.src = images[currentImageIndex];
                    }
                    
                    // Update active thumbnail
                    thumbnailBtns.forEach(tb => {
                        if (tb === this) {
                            tb.classList.add('border-2', 'border-blue-500');
                            tb.classList.remove('border');
                        } else {
                            tb.classList.remove('border-2', 'border-blue-500');
                            tb.classList.add('border');
                        }
                    });
                });
            });
            
            // Previous button
            prevBtn.addEventListener('click', function() {
                ${productGif ? 'if (showingGif) return;' : ''}
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                mainImage.src = images[currentImageIndex];
                
                // Update active thumbnail
                thumbnailBtns.forEach((tb, index) => {
                    if (index === currentImageIndex) {
                        tb.classList.add('border-2', 'border-blue-500');
                        tb.classList.remove('border');
                    } else if (!tb.dataset.gif) {
                        tb.classList.remove('border-2', 'border-blue-500');
                        tb.classList.add('border');
                    }
                });
            });
            
            // Next button
            nextBtn.addEventListener('click', function() {
                ${productGif ? 'if (showingGif) return;' : ''}
                currentImageIndex = (currentImageIndex + 1) % images.length;
                mainImage.src = images[currentImageIndex];
                
                // Update active thumbnail
                thumbnailBtns.forEach((tb, index) => {
                    if (index === currentImageIndex) {
                        tb.classList.add('border-2', 'border-blue-500');
                        tb.classList.remove('border');
                    } else if (!tb.dataset.gif) {
                        tb.classList.remove('border-2', 'border-blue-500');
                        tb.classList.add('border');
                    }
                });
            });
            
            ${productGif ? `
            // Toggle GIF
            toggleGifBtn.addEventListener('click', function() {
                if (showingGif) {
                    mainImage.classList.remove('hidden');
                    gifImage.classList.add('hidden');
                    showingGif = false;
                    
                    // Update active thumbnail
                    thumbnailBtns.forEach((tb, index) => {
                        if (index === currentImageIndex) {
                            tb.classList.add('border-2', 'border-blue-500');
                            tb.classList.remove('border');
                        } else if (!tb.dataset.gif) {
                            tb.classList.remove('border-2', 'border-blue-500');
                            tb.classList.add('border');
                        }
                    });
                } else {
                    mainImage.classList.add('hidden');
                    gifImage.classList.remove('hidden');
                    showingGif = true;
                    
                    // Update active thumbnail
                    thumbnailBtns.forEach(tb => {
                        if (tb.dataset.gif) {
                            tb.classList.add('border-2', 'border-blue-500');
                            tb.classList.remove('border');
                        } else {
                            tb.classList.remove('border-2', 'border-blue-500');
                            tb.classList.add('border');
                        }
                    });
                }
            });
            ` : ''}
            
            // Quantity controls
            const quantityInput = document.getElementById('quantity');
            const decrementBtn = document.getElementById('decrementBtn');
            const incrementBtn = document.getElementById('incrementBtn');
            
            decrementBtn.addEventListener('click', function() {
                let value = parseInt(quantityInput.value);
                if (value > 1) {
                    quantityInput.value = value - 1;
                    updateOrderSummary();
                }
            });
            
            incrementBtn.addEventListener('click', function() {
                let value = parseInt(quantityInput.value);
                quantityInput.value = value + 1;
                updateOrderSummary();
            });
            
            quantityInput.addEventListener('change', function() {
                if (this.value < 1) this.value = 1;
                updateOrderSummary();
            });
            
            // Address selection
            const provinceSelect = document.getElementById('province');
            const citySelect = document.getElementById('city');
            const districtSelect = document.getElementById('district');
            
            // Province data
            const provinceData = {
                "DKI Jakarta": ["Jakarta Pusat", "Jakarta Barat", "Jakarta Selatan", "Jakarta Timur", "Jakarta Utara"],
                "Jawa Barat": ["Bandung", "Bogor", "Bekasi", "Depok", "Cimahi"],
                "Jawa Tengah": ["Semarang", "Surakarta", "Pekalongan", "Tegal", "Salatiga"],
                "Jawa Timur": ["Surabaya", "Malang", "Sidoarjo", "Madiun", "Kediri"],
                "Banten": ["Tangerang", "Serang", "Cilegon", "Tangerang Selatan", "Lebak"],
                "Bali": ["Denpasar", "Badung", "Gianyar", "Klungkung", "Bangli"],
                "Sumatera Utara": ["Medan", "Binjai", "Pematang Siantar", "Tebing Tinggi", "Tanjung Balai"],
                "Sumatera Barat": ["Padang", "Bukittinggi", "Payakumbuh", "Pariaman", "Solok"],
                "Sumatera Selatan": ["Palembang", "Prabumulih", "Pagar Alam", "Lubuklinggau", "Banyuasin"],
                "Sulawesi Selatan": ["Makassar", "Parepare", "Palopo", "Maros", "Gowa"]
            };
            
            // District data
            const districtData = {
                "Jakarta Pusat": ["Gambir", "Tanah Abang", "Menteng", "Senen", "Cempaka Putih"],
                "Jakarta Barat": ["Kebon Jeruk", "Kembangan", "Palmerah", "Grogol Petamburan", "Taman Sari"],
                "Jakarta Selatan": ["Kebayoran Baru", "Kebayoran Lama", "Pancoran", "Cilandak", "Pasar Minggu"],
                "Jakarta Timur": ["Matraman", "Pulo Gadung", "Jatinegara", "Duren Sawit", "Cakung"],
                "Jakarta Utara": ["Penjaringan", "Tanjung Priok", "Koja", "Cilincing", "Kelapa Gading"],
                "Bandung": ["Bandung Kulon", "Babakan Ciparay", "Bojongloa Kaler", "Bojongloa Kidul", "Sukajadi"],
                "Bogor": ["Bogor Selatan", "Bogor Timur", "Bogor Utara", "Bogor Tengah", "Bogor Barat"],
                "Bekasi": ["Bekasi Selatan", "Bekasi Timur", "Bekasi Barat", "Bekasi Utara", "Pondok Gede"],
                "Depok": ["Beji", "Pancoran Mas", "Cipayung", "Sukmajaya", "Cilodong"],
                "Cimahi": ["Cimahi Selatan", "Cimahi Tengah", "Cimahi Utara"],
                "Semarang": ["Semarang Barat", "Semarang Selatan", "Semarang Timur", "Semarang Utara", "Semarang Tengah"],
                "Surakarta": ["Laweyan", "Serengan", "Pasar Kliwon", "Jebres", "Banjarsari"],
                "Pekalongan": ["Pekalongan Barat", "Pekalongan Timur", "Pekalongan Utara", "Pekalongan Selatan"],
                "Tegal": ["Tegal Barat", "Tegal Timur", "Tegal Selatan", "Margadana"],
                "Salatiga": ["Sidorejo", "Tingkir", "Argomulyo", "Sidomukti"],
                "Surabaya": ["Sukolilo", "Wonokromo", "Dukuh Pakis", "Gubeng", "Tegalsari"],
                "Malang": ["Klojen", "Blimbing", "Kedungkandang", "Sukun", "Lowokwaru"],
                "Sidoarjo": ["Sidoarjo", "Buduran", "Gedangan", "Waru", "Tarik"],
                "Madiun": ["Kartoharjo", "Manguharjo", "Taman"],
                "Kediri": ["Mojoroto", "Kota", "Pesantren"],
                "Tangerang": ["Batuceper", "Benda", "Cibodas", "Ciledug", "Jatiuwung"],
                "Serang": ["Curug", "Kasemen", "Cipocok Jaya", "Taktakan", "Walantaka"],
                "Cilegon": ["Cilegon", "Pulomerak", "Ciwandan", "Jombang"],
                "Tangerang Selatan": ["Pondok Aren", "Serpong", "Serpong Utara", "Ciputat", "Ciputat Timur"],
                "Lebak": ["Rangkasbitung", "Warunggunung", "Cibadak", "Cikulur", "Cileles"],
                "Denpasar": ["Denpasar Barat", "Denpasar Timur", "Denpasar Selatan", "Denpasar Utara"],
                "Badung": ["Kuta", "Mengwi", "Abiansemal", "Petang"],
                "Gianyar": ["Gianyar", "Tampaksiring", "Ubud", "Tegallalang"],
                "Klungkung": ["Klungkung", "Dawan", "Nusapenida"],
                "Bangli": ["Bangli", "Kintamani", "Susut", "Tembuku"],
                "Medan": ["Medan Barat", "Medan Baru", "Medan Deli", "Medan Denai", "Medan Helvetia"],
                "Binjai": ["Binjai Barat", "Binjai Kota", "Binjai Selatan", "Binjai Timur", "Binjai Utara"],
                "Pematang Siantar": ["Siantar Barat", "Siantar Marihat", "Siantar Martoba", "Siantar Selatan", "Siantar Timur"],
                "Tebing Tinggi": ["Padang Hilir", "Rambutan", "Tebing Tinggi Kota"],
                "Tanjung Balai": ["Tanjung Balai Selatan", "Tanjung Balai Utara", "Sei Tualang Raso"],
                "Padang": ["Padang Barat", "Padang Selatan", "Padang Timur", "Padang Utara", "Koto Tangah"],
                "Bukittinggi": ["Guguk Panjang", "Mandiangin Koto Selayan", "Aur Birugo Tigo Baleh"],
                "Payakumbuh": ["Payakumbuh Barat", "Payakumbuh Selatan", "Payakumbuh Timur", "Payakumbuh Utara"],
                "Pariaman": ["Pariaman Selatan", "Pariaman Tengah", "Pariaman Timur", "Pariaman Utara"],
                "Solok": ["Lubuk Sikarah", "Tanjung Harapan"],
                "Palembang": ["Ilir Barat I", "Ilir Barat II", "Ilir Timur I", "Ilir Timur II", "Seberang Ulu I"],
                "Prabumulih": ["Prabumulih Barat", "Prabumulih Selatan", "Prabumulih Timur", "Prabumulih Utara"],
                "Pagar Alam": ["Pagar Alam Selatan", "Pagar Alam Utara"],
                "Lubuklinggau": ["Lubuklinggau Barat I", "Lubuklinggau Barat II", "Lubuklinggau Selatan I", "Lubuklinggau Selatan II"],
                "Banyuasin": ["Banyuasin I", "Banyuasin II", "Banyuasin III", "Talang Kelapa"],
                "Makassar": ["Biringkanaya", "Bontoala", "Makassar", "Mamajang", "Mariso"],
                "Parepare": ["Bacukiki", "Soreang", "Ujung"],
                "Palopo": ["Bara", "Mungkajang", "Sendana", "Wara", "Wara Selatan"],
                "Maros": ["Bantimurung", "Camba", "Lau", "Mallawa", "Mandai"],
                "Gowa": ["Bajeng", "Barombong", "Biringbulu", "Bontomarannu", "Pallangga"]
            };
            
            // Shipping cost data (per province, transfer vs COD)
            const shippingCosts = {
                "DKI Jakarta": { transfer: 10000, cod: 15000 },
                "Jawa Barat": { transfer: 15000, cod: 20000 },
                "Jawa Tengah": { transfer: 20000, cod: 25000 },
                "Jawa Timur": { transfer: 25000, cod: 30000 },
                "Banten": { transfer: 15000, cod: 20000 },
                "Bali": { transfer: 30000, cod: 35000 },
                "Sumatera Utara": { transfer: 35000, cod: 40000 },
                "Sumatera Barat": { transfer: 40000, cod: 45000 },
                "Sumatera Selatan": { transfer: 30000, cod: 35000 },
                "Sulawesi Selatan": { transfer: 50000, cod: 55000 }
            };
            
            // Province change handler
            provinceSelect.addEventListener('change', function() {
                citySelect.innerHTML = '<option value="">Pilih Kota</option>';
                districtSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
                
                if (this.value) {
                    citySelect.disabled = false;
                    const cities = provinceData[this.value];
                    
                    cities.forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    });
                    
                    updateOrderSummary();
                } else {
                    citySelect.disabled = true;
                    districtSelect.disabled = true;
                    updateOrderSummary();
                }
            });
            
            // City change handler
            citySelect.addEventListener('change', function() {
                districtSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
                
                if (this.value) {
                    districtSelect.disabled = false;
                    const districts = districtData[this.value];
                    
                    districts.forEach(district => {
                        const option = document.createElement('option');
                        option.value = district;
                        option.textContent = district;
                        districtSelect.appendChild(option);
                    });
                } else {
                    districtSelect.disabled = true;
                }
                
                updateOrderSummary();
            });
            
            // District change handler
            districtSelect.addEventListener('change', function() {
                updateOrderSummary();
            });
            
            // Payment method change handler
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    updateOrderSummary();
                });
            });
            
            // Order summary update function
            function updateOrderSummary() {
                const quantity = parseInt(quantityInput.value);
                const price = ${productPrice};
                const subtotal = quantity * price;
                
                // Format currency
                const formatCurrency = (amount) => {
                    return new Intl.NumberFormat('id-ID', { 
                        style: 'currency', 
                        currency: 'IDR',
                        minimumFractionDigits: 0
                    }).format(amount);
                };
                
                // Calculate shipping cost
                let shippingCost = 0;
                const province = provinceSelect.value;
                const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
                
                if (province && shippingCosts[province]) {
                    shippingCost = shippingCosts[province][paymentMethod];
                }
                
                // Generate unique code (100-999)
                const uniqueCode = Math.floor(Math.random() * 900) + 100;
                
                // Update DOM
                document.getElementById('subtotal').textContent = formatCurrency(subtotal);
                document.getElementById('shippingCost').textContent = formatCurrency(shippingCost);
                document.getElementById('uniqueCode').textContent = uniqueCode;
                
                const total = subtotal + shippingCost + uniqueCode;
                document.getElementById('totalPrice').textContent = formatCurrency(total);
            }
            
            // Order button click handler
            document.getElementById('orderBtn').addEventListener('click', function() {
                // Validate form
                const form = document.getElementById('orderForm');
                const requiredFields = ['customerName', 'customerWhatsApp', 'province', 'city', 'district', 'address'];
                let isValid = true;
                
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.classList.add('border-red-500');
                        isValid = false;
                    } else {
                        field.classList.remove('border-red-500');
                    }
                });
                
                // Validate WhatsApp number
                const whatsappNumber = document.getElementById('customerWhatsApp').value.trim();
                if (whatsappNumber && !/^62\d{9,}$/.test(whatsappNumber)) {
                    document.getElementById('customerWhatsApp').classList.add('border-red-500');
                    isValid = false;
                }
                
                if (!isValid) {
                    alert('Harap lengkapi semua field yang wajib diisi dengan format yang benar!');
                    return;
                }
                
                // Prepare WhatsApp message
                const productName = "${productName}";
                const quantity = parseInt(quantityInput.value);
                const variant = ${hasVariants} ? document.getElementById('productVariant').value : '-';
                const customerName = document.getElementById('customerName').value.trim();
                const customerWhatsApp = document.getElementById('customerWhatsApp').value.trim();
                const province = document.getElementById('province').value;
                const city = document.getElementById('city').value;
                const district = document.getElementById('district').value;
                const address = document.getElementById('address').value.trim();
                const notes = document.getElementById('notes').value.trim();
                const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value === 'transfer' ? 'Transfer Bank' : 'COD';
                
                const subtotal = quantity * ${productPrice};
                const shippingCost = shippingCosts[province][document.querySelector('input[name="paymentMethod"]:checked').value];
                const uniqueCode = parseInt(document.getElementById('uniqueCode').textContent);
                const total = subtotal + shippingCost + uniqueCode;
                
                const message = `Halo ${storeName}, saya ingin memesan:

*Produk:* ${productName}
${hasVariants ? `*Varian:* ${variant}\n` : ''}*Jumlah:* ${quantity}
*Harga Satuan:* ${formattedPrice}
*Subtotal:* ${new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(subtotal)}
*Ongkos Kirim:* ${new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(shippingCost)}
*Kode Unik:* ${uniqueCode}
*Total Pembayaran:* ${new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(total)}

*Data Diri:*
Nama: ${customerName}
WhatsApp: ${customerWhatsApp}
Alamat: ${address}, ${district}, ${city}, ${province}
${notes ? `Catatan: ${notes}\n` : ''}
*Metode Pembayaran:* ${paymentMethod}

Mohon konfirmasi ketersediaan stock dan total yang harus dibayar. Terima kasih.`;
                
                // Encode message for WhatsApp URL
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = \`https://wa.me/${whatsappNumber}?text=\${encodedMessage}\`;
                
                // Open WhatsApp
                window.open(whatsappUrl, '_blank');
            });
            
            // Initialize order summary
            updateOrderSummary();
        });
    </script>
</body>
</html>
